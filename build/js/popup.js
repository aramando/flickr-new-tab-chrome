/*! flickr-new-tab 2015-08-01 */
document.onreadystatechange=function(){function a(a){var c=localStorage.getItem("flickrTag"),d=a.split(",");if(d=d.map(b),c&&"null"!==c){if(o=c.split(","),!(o.length+d.length<p+1))return void(l.style.display="block");o=o.concat(d),localStorage.setItem("flickrTag",o.join(","))}else d.length=Math.min(d.length,p),localStorage.setItem("flickrTag",d.join(","));l.style.display="none",e(),localStorage.setItem("flickrRecrawl","true"),localStorage.setItem("tagChanged","true")}function b(a){return a.trim()}function c(){var a=document.getElementById("currentTagCont"),b=document.getElementById("currentTag");localStorage.removeItem("flickrTag"),localStorage.setItem("flickrRecrawl","true"),localStorage.setItem("tagChanged","true"),a.innerHTML="",b.style.display="block"}function d(a){var b,c=this.parentNode.parentNode,d=this.parentNode,e=d.querySelectorAll(".tagValue"),f=e[0].innerHTML,g=localStorage.getItem("flickrTag");c.removeChild(d),g&&"null"!==g&&(g=g.split(","),1===g.length&&g[0]===f?(localStorage.removeItem("flickrTag"),b=document.getElementById("currentTag"),b.style.display="block"):(g.splice(g.indexOf(f),1),localStorage.setItem("flickrTag",g.join(","))),localStorage.setItem("flickrRecrawl","true"),localStorage.setItem("tagChanged","true"))}function e(){var a,b,c,e=document.getElementById("currentTagCont"),f=document.getElementById("currentTag"),g=localStorage.getItem("flickrTag");if(e.innerHTML="",g&&null!==g){for(g=g.split(","),c=0;c<g.length;c++)b=document.getElementById("template").innerHTML,b=b.replace("{{tag}}",g[c]),e.innerHTML+=b;for(f.style.display="none",a=document.querySelectorAll(".delete"),c=0;c<a.length;c++)a[c].addEventListener("click",d)}else f.style.display="block"}function f(){n.style.display="block"}function g(){n.style.display="none"}var h=document.readyState;if("complete"===h){var i=(localStorage.getItem("flickrTag"),document.getElementById("submit")),j=document.getElementById("tag"),k=document.getElementById("clear"),l=document.getElementById("errorMsg"),m=document.getElementById("infoIcon"),n=document.getElementById("helper"),o=[],p=6;i.addEventListener("click",function(){j.value&&(a(j.value),j.value="")}),j.addEventListener("keypress",function(b){13===b.keyCode&&j.value&&(a(j.value),j.value="")}),k.addEventListener("click",c),m.addEventListener("mouseover",f),m.addEventListener("mouseout",g),e()}};